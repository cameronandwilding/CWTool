<?php
/**
 * @file
 *
 * Helper functions.
 */

use Symfony\Component\DependencyInjection\ContainerBuilder;

require_once __DIR__ . '/vendor/autoload.php';
require_once __DIR__ . '/includes/cw_tool.content.inc';
require_once __DIR__ . '/includes/cw_tool.util.inc';

function cw_tool_get_container() {
  static $container;

  if (!empty($container)) {
    return $container;
  }

  $container = new ContainerBuilder();
  $container
    ->register('entity-loader', 'CW\Util\EntityLocalProcessIdentityMap')
    ->addArgument('CW\Model\EntityModel');

  $container
    ->register('node-controller-factory', 'CW\Controller\NodeControllerFactory')
    ->addArgument('CW\Controller\NodeController');

  return $container;
}
